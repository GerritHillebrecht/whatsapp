import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Input } from '@angular/core';
import { FormControl } from '@angular/forms';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatMenuModule } from '@angular/material/menu';
import { TextareaComponent } from '../textarea/textarea.component';

@Component({
  selector: 'app-emoji-selector',
  standalone: true,
  imports: [CommonModule, MatButtonModule, MatIconModule, MatMenuModule],
  templateUrl: './emoji-selector.component.html',
  styleUrls: ['./emoji-selector.component.scss'],
})
export class EmojiSelectorComponent {
  @Input()
  control: FormControl | undefined;

  @Input()
  inputComponent: TextareaComponent | undefined;

  // List of all emojis
  emojis = [
    'ğŸ˜€',
    'ğŸ˜',
    'ğŸ˜‚',
    'ğŸ¤£',
    'ğŸ˜ƒ',
    'ğŸ˜„',
    'ğŸ˜…',
    'ğŸ˜†',
    'ğŸ˜‰',
    'ğŸ˜Š',
    'ğŸ˜‹',
    'ğŸ˜',
    'ğŸ˜',
    'ğŸ˜˜',
    'ğŸ˜—',
    'ğŸ˜™',
    'ğŸ˜š',
    'ğŸ™‚',
    'ğŸ¤—',
    'ğŸ¤©',
    'ğŸ¤”',
    'ğŸ¤¨',
    'ğŸ˜',
    'ğŸ˜‘',
    'ğŸ˜¶',
    'ğŸ™„',
    'ğŸ˜',
    'ğŸ˜£',
    'ğŸ˜¥',
    'ğŸ˜®',
    'ğŸ¤',
    'ğŸ˜¯',
    'ğŸ˜ª',
    'ğŸ˜«',
    'ğŸ˜´',
    'ğŸ˜Œ',
    'ğŸ˜›',
    'ğŸ˜œ',
    'ğŸ˜',
    'ğŸ¤¤',
    'ğŸ˜’',
    'ğŸ˜“',
    'ğŸ˜”',
    'ğŸ˜•',
    'ğŸ™ƒ',
    'ğŸ¤‘',
    'ğŸ˜²',
    'â˜¹ï¸',
    'ğŸ™',
    'ğŸ˜–',
    'ğŸ˜',
    'ğŸ˜Ÿ',
    'ğŸ˜¤',
    'ğŸ˜¢',
    'ğŸ˜­',
    'ğŸ˜¦',
    'ğŸ˜§',
    'ğŸ˜¨',
    'ğŸ˜©',
    'ğŸ¤¯',
    'ğŸ˜¬',
    'ğŸ˜°',
    'ğŸ˜±',
    'ğŸ˜³',
    'ğŸ¤ª',
    'ğŸ˜µ',
    'ğŸ˜¡',
    'ğŸ˜ ',
    'ğŸ¤¬',
    'ğŸ˜·',
    'ğŸ¤’',
    'ğŸ¤•',
    'ğŸ¤¢',
    'ğŸ¤®',
    'ğŸ¤§',
    'ğŸ˜‡',
    'ğŸ¤ ',
    'ğŸ¤¡',
    'ğŸ¥³',
    'ğŸ¥´',
    'ğŸ¥º',
    'ğŸ¤¥',
    'ğŸ¤«',
    'ğŸ¤­',
    'ğŸ§',
    'ğŸ¤“',
    'ğŸ˜ˆ',
    'ğŸ‘¿',
    'ğŸ‘¹',
    'ğŸ‘º',
    'ğŸ’€',
    'â˜ ï¸',
    'ğŸ‘»',
    'ğŸ‘½',
    'ğŸ‘¾',
    'ğŸ¤–',
    'ğŸ’©',
    'ğŸ˜º',
    'ğŸ˜¸',
    'ğŸ˜¹',
    'ğŸ˜»',
    'ğŸ˜¼',
    'ğŸ˜½',
    'ğŸ™€',
    'ğŸ˜¿',
    'ğŸ˜¾',
    'ğŸ‘‹',
    'ğŸ¤š',
    'ğŸ–',
    'âœ‹',
    'ğŸ––',
    'ğŸ‘Œ',
    'ğŸ¤Œ',
    'ğŸ¤',
    'âœŒï¸',
    'ğŸ¤',
    'ğŸ¤Ÿ',
    'ğŸ¤˜',
    'ğŸ¤™',
    'ğŸ‘ˆ',
    'ğŸ‘‰',
    'ğŸ‘†',
    'ğŸ–•',
    'ğŸ‘‡',
    'â˜ï¸',
    'ğŸ‘',
    'ğŸ‘',
    'âœŠ',
    'ğŸ‘Š',
    'ğŸ¤›',
    'ğŸ¤œ',
    'ğŸ‘',
    'ğŸ™Œ',
    'ğŸ‘',
    'ğŸ¤²',
    'ğŸ¤',
    'ğŸ™',
    'âœï¸',
    'ğŸ’…',
    'ğŸ¤³',
    'ğŸ’ª',
    'ğŸ¦¾',
    'ğŸ¦µ',
    'ğŸ¦¿',
    'ğŸ¦¶',
    'ğŸ‘‚',
    'ğŸ¦»',
    'ğŸ‘ƒ',
    'ğŸ§ ',
    'ğŸ«€',
    'ğŸ«',
    'ğŸ¦·',
    'ğŸ¦´',
    'ğŸ‘€',
    'ğŸ‘',
    'ğŸ‘…',
    'ğŸ‘„',
    'ğŸ‘¶',
    'ğŸ§’',
    'ğŸ‘¦',
    'ğŸ‘§',
    'ğŸ§‘',
    'ğŸ‘±',
    'ğŸ‘¨',
    'ğŸ§”',
    'ğŸ‘¨â€ğŸ¦°',
    'ğŸ‘¨â€ğŸ¦±',
    'ğŸ‘¨â€ğŸ¦³',
    'ğŸ‘¨â€ğŸ¦²',
    'ğŸ‘©',
    'ğŸ‘©â€ğŸ¦°',
    'ğŸ‘©â€ğŸ¦±',
    'ğŸ‘©â€ğŸ¦³',
    'ğŸ‘©â€ğŸ¦²',
    'ğŸ§“',
  ];

  protected emojiClickHandler(emoji: string) {
    if (!this.control || !this.inputComponent) return;

    const { control, inputComponent } = this;
    const { value } = control!;
    const { nativeElement } = inputComponent.elementRef!;
    const cursorPos = nativeElement.selectionStart;

    this.control.patchValue(
      value.slice(0, cursorPos) + emoji + value.slice(cursorPos)
    );
  }
}
